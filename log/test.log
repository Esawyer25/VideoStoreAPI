  [1m[35m (133.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "VideoStoreAPI_test"[0m
  [1m[35m (488.2ms)[0m  [1m[35mCREATE DATABASE "VideoStoreAPI_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "name" character varying, "registered_at" character varying, "address" character varying, "city" character varying, "state" character varying, "postal_code" character varying, "phone" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "account_credit" float, "movies_checked_out_count" integer DEFAULT 0 NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "movies" CASCADE[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "movies" ("id" bigserial primary key, "title" character varying, "overview" character varying, "release_date" character varying, "inventory" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (26.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20171106220629)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20171106202253),
(20171106202612),
(20171106203250);

[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2017-11-06 22:48:22.706884"], ["updated_at", "2017-11-06 22:48:22.706884"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.5ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:48:23.133950', '2017-11-06 22:48:23.133950', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:48:23.133950', '2017-11-06 22:48:23.133950', 298486374)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:48:23.142835', '2017-11-06 22:48:23.142835', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:48:23.142835', '2017-11-06 22:48:23.142835', 298486374)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:48:23 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:48:23 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:50:20.011911', '2017-11-06 22:50:20.011911', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:50:20.011911', '2017-11-06 22:50:20.011911', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:50:20.021465', '2017-11-06 22:50:20.021465', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:50:20.021465', '2017-11-06 22:50:20.021465', 298486374)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:50:20 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:50:20 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:50:20 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:52:51.582782', '2017-11-06 22:52:51.582782', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:52:51.582782', '2017-11-06 22:52:51.582782', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:52:51.592322', '2017-11-06 22:52:51.592322', 980190962)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:52:51.592322', '2017-11-06 22:52:51.592322', 298486374)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:52:51 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:52:51 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.4ms)
  [1m[35m (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:52:51 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:52:51 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:53:05.730107', '2017-11-06 22:53:05.730107', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:53:05.730107', '2017-11-06 22:53:05.730107', 298486374)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:53:05.744084', '2017-11-06 22:53:05.744084', 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:53:05.744084', '2017-11-06 22:53:05.744084', 298486374)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:53:05 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:53:05 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:53:05 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:53:05 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:56:06.979291', '2017-11-06 22:56:06.979291', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:56:06.979291', '2017-11-06 22:56:06.979291', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:56:06.986944', '2017-11-06 22:56:06.986944', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:56:06.986944', '2017-11-06 22:56:06.986944', 298486374)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:56:07 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:56:07 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:56:07 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:56:07 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:56:07 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:57:21.766673', '2017-11-06 22:57:21.766673', 980190962)[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:57:21.766673', '2017-11-06 22:57:21.766673', 298486374)[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:57:21.785118', '2017-11-06 22:57:21.785118', 980190962)[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:57:21.785118', '2017-11-06 22:57:21.785118', 298486374)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:57:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:57:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:57:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:57:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 5ms (Views: 1.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:57:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:59:02.474303', '2017-11-06 22:59:02.474303', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 22:59:02.474303', '2017-11-06 22:59:02.474303', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:59:02.486649', '2017-11-06 22:59:02.486649', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2017-11-06 22:59:02.486649', '2017-11-06 22:59:02.486649', 298486374)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:59:02 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 22ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:59:02 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:59:02 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:59:02 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 14:59:02 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (2.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (141.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "VideoStoreAPI_test"[0m
  [1m[35m (560.1ms)[0m  [1m[35mCREATE DATABASE "VideoStoreAPI_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "name" character varying, "registered_at" character varying, "address" character varying, "city" character varying, "state" character varying, "postal_code" character varying, "phone" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "account_credit" float, "movies_checked_out_count" integer DEFAULT 0 NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "movies" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "movies" ("id" bigserial primary key, "title" character varying, "overview" character varying, "release_date" character varying, "inventory" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "available_inventory" integer)[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20171106232634)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20171106202253),
(20171106202612),
(20171106203250),
(20171106220629);

[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2017-11-06 23:38:37.061943"], ["updated_at", "2017-11-06 23:38:37.061943"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (6.8ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:39:13.033762', '2017-11-06 23:39:13.033762', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:39:13.033762', '2017-11-06 23:39:13.033762', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-06 23:39:13.051185', '2017-11-06 23:39:13.051185', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('An insatiable great white shark terrorizes the townspeople of Amity Island, The police chief, an oceanographer and a grizzled shark hunter seek to destroy the bloodthirsty beast', '1975-06-19', 6, '2017-11-06 23:39:13.051185', '2017-11-06 23:39:13.051185', 898238949)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 7ms (Views: 0.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:39:13 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:42:21.434145', '2017-11-06 23:42:21.434145', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:42:21.434145', '2017-11-06 23:42:21.434145', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-06 23:42:21.443133', '2017-11-06 23:42:21.443133', 287487352)[0m
  [1m[36mFixture Insert (5.4ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('An insatiable great white shark terrorizes the townspeople of Amity Island, The police chief, an oceanographer and a grizzled shark hunter seek to destroy the bloodthirsty beast', '1975-06-19', 6, '2017-11-06 23:42:21.443133', '2017-11-06 23:42:21.443133', 898238949)[0m
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.7ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-06 15:42:21 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:46:55.503277', '2017-11-06 23:46:55.503277', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:46:55.503277', '2017-11-06 23:46:55.503277', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-06 23:46:55.510810', '2017-11-06 23:46:55.510810', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('An insatiable great white shark terrorizes the townspeople of Amity Island, The police chief, an oceanographer and a grizzled shark hunter seek to destroy the bloodthirsty beast', '1975-06-19', 6, '2017-11-06 23:46:55.510810', '2017-11-06 23:46:55.510810', 898238949)[0m
  [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-06 15:46:55 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.6ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-06 23:46:55.631752"], ["updated_at", "2017-11-06 23:46:55.631752"], ["available_inventory", 10]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 7.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:50:46.265339', '2017-11-06 23:50:46.265339', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:50:46.265339', '2017-11-06 23:50:46.265339', 298486374)[0m
  [1m[36mFixture Delete (5.9ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-06 23:50:46.274324', '2017-11-06 23:50:46.274324', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('An insatiable great white shark terrorizes the townspeople of Amity Island, The police chief, an oceanographer and a grizzled shark hunter seek to destroy the bloodthirsty beast', '1975-06-19', 6, '2017-11-06 23:50:46.274324', '2017-11-06 23:50:46.274324', 898238949)[0m
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-06 23:50:46.316522"], ["updated_at", "2017-11-06 23:50:46.316522"], ["available_inventory", 10]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["inventory", 10], ["created_at", "2017-11-06 23:50:46.333357"], ["updated_at", "2017-11-06 23:50:46.333357"], ["available_inventory", 10]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.7ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (1.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:50:46 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:52:26.317813', '2017-11-06 23:52:26.317813', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:52:26.317813', '2017-11-06 23:52:26.317813', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-06 23:52:26.327727', '2017-11-06 23:52:26.327727', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('An insatiable great white shark terrorizes the townspeople of Amity Island, The police chief, an oceanographer and a grizzled shark hunter seek to destroy the bloodthirsty beast', '1975-06-19', 6, '2017-11-06 23:52:26.327727', '2017-11-06 23:52:26.327727', 898238949)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (6.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 23ms (Views: 0.4ms | ActiveRecord: 6.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-06 23:52:26.397256"], ["updated_at", "2017-11-06 23:52:26.397256"], ["available_inventory", 10]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.5ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
Movie: test_0001_must be valid
------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.6ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35m (6.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (3.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 11ms (Views: 1.6ms | ActiveRecord: 3.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:52:26 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (2.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:53:35.710137', '2017-11-06 23:53:35.710137', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-06 23:53:35.710137', '2017-11-06 23:53:35.710137', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-06 23:53:35.718084', '2017-11-06 23:53:35.718084', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('An insatiable great white shark terrorizes the townspeople of Amity Island, The police chief, an oceanographer and a grizzled shark hunter seek to destroy the bloodthirsty beast', '1975-06-19', 6, '2017-11-06 23:53:35.718084', '2017-11-06 23:53:35.718084', 898238949)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.6ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-06 23:53:35.765828"], ["updated_at", "2017-11-06 23:53:35.765828"], ["available_inventory", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (4.0ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.4ms)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-06 15:53:35 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (191.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "VideoStoreAPI_test"[0m
  [1m[35m (414.8ms)[0m  [1m[35mCREATE DATABASE "VideoStoreAPI_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "name" character varying, "registered_at" character varying, "address" character varying, "city" character varying, "state" character varying, "postal_code" character varying, "phone" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "account_credit" float, "movies_checked_out_count" integer DEFAULT 0 NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "movies" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "movies" ("id" bigserial primary key, "title" character varying, "overview" character varying, "release_date" character varying, "inventory" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "available_inventory" integer)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20171106232634)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20171106202253),
(20171106202612),
(20171106203250),
(20171106220629);

[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2017-11-07 00:13:37.447720"], ["updated_at", "2017-11-07 00:13:37.447720"]]
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.8ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (12.8ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 17:34:17.908978', '2017-11-07 17:34:17.908978', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 17:34:17.908978', '2017-11-07 17:34:17.908978', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-07 17:34:17.937432', '2017-11-07 17:34:17.937432', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, '2017-11-07 17:34:17.937432', '2017-11-07 17:34:17.937432', 898238949)[0m
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
MoviesController::show: test_0003_returns the right information
---------------------------------------------------------------
  [1m[36mMovie Load (5.9ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 09:34:17 -0800
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 09:34:17 -0800
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-07 09:34:17 -0800
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 09:34:17 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 09:34:17 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 09:34:17 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
MoviesController::index: test_0006_returns an empty array if there are no movies
--------------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/movies" for 127.0.0.1 at 2017-11-07 09:34:17 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by CustomersController#index as HTML
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by CustomersController#index as HTML
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by CustomersController#index as HTML
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
CustomersController::index: test_0006_returns an empty array if there are no customer
-------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/customers" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by CustomersController#index as HTML
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by CustomersController#index as HTML
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by CustomersController#index as HTML
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 400 Bad Request in 9ms (Views: 3.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 09:34:18 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-07 17:34:18.102118"], ["updated_at", "2017-11-07 17:34:18.102118"], ["available_inventory", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 17:49:42.973125', '2017-11-07 17:49:42.973125', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 17:49:42.973125', '2017-11-07 17:49:42.973125', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-07 17:49:42.981189', '2017-11-07 17:49:42.981189', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, '2017-11-07 17:49:42.981189', '2017-11-07 17:49:42.981189', 898238949)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 17:51:05.102231', '2017-11-07 17:51:05.102231', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 17:51:05.102231', '2017-11-07 17:51:05.102231', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-07 17:51:05.110702', '2017-11-07 17:51:05.110702', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, '2017-11-07 17:51:05.110702', '2017-11-07 17:51:05.110702', 898238949)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 17:51:19.167738', '2017-11-07 17:51:19.167738', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 17:51:19.167738', '2017-11-07 17:51:19.167738', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, '2017-11-07 17:51:19.176427', '2017-11-07 17:51:19.176427', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, '2017-11-07 17:51:19.176427', '2017-11-07 17:51:19.176427', 898238949)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 18:42:14.979930', '2017-11-07 18:42:14.979930', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 18:42:14.979930', '2017-11-07 18:42:14.979930', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 18:42:14.996266', '2017-11-07 18:42:14.996266', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 18:42:14.996266', '2017-11-07 18:42:14.996266', 898238949)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 400 Bad Request in 16ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-07 18:42:15.042905"], ["updated_at", "2017-11-07 18:42:15.042905"], ["available_inventory", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (4.88ms)
Completed 200 OK in 23ms (Views: 22.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (0.59ms)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
CustomersController::index: test_0006_returns an empty array if there are no customer
-------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.24ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (1.01ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (0.61ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (0.66ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.6ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
No serializer found for resource: #<Movie id: 287487352, title: "Psych", overview: "When larcenous real estate clerk Marion Crane goes...", release_date: "1960-06-16", inventory: 8, created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", available_inventory: 8>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Movie::ActiveRecord_Relation (1.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
No serializer found for resource: #<Movie id: 287487352, title: "Psych", overview: "When larcenous real estate clerk Marion Crane goes...", release_date: "1960-06-16", inventory: 8, created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", available_inventory: 8>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Movie::ActiveRecord_Relation (0.68ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
MoviesController::index: test_0006_returns an empty array if there are no movies
--------------------------------------------------------------------------------
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.08ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
No serializer found for resource: #<Movie id: 287487352, title: "Psych", overview: "When larcenous real estate clerk Marion Crane goes...", release_date: "1960-06-16", inventory: 8, created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", available_inventory: 8>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Movie::ActiveRecord_Relation (0.55ms)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
No serializer found for resource: #<Movie id: 287487352, title: "Psych", overview: "When larcenous real estate clerk Marion Crane goes...", release_date: "1960-06-16", inventory: 8, created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", available_inventory: 8>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Movie::ActiveRecord_Relation (0.56ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
No serializer found for resource: #<Movie id: 287487352, title: "Psych", overview: "When larcenous real estate clerk Marion Crane goes...", release_date: "1960-06-16", inventory: 8, created_at: "2017-11-07 18:42:14", updated_at: "2017-11-07 18:42:14", available_inventory: 8>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Movie::ActiveRecord_Relation (0.62ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
MoviesController::show: test_0003_returns the right information
---------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-07 10:42:15 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 404 Not Found in 1ms (Views: 0.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 18:44:09.475933', '2017-11-07 18:44:09.475933', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 18:44:09.475933', '2017-11-07 18:44:09.475933', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 18:44:09.483901', '2017-11-07 18:44:09.483901', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 18:44:09.483901', '2017-11-07 18:44:09.483901', 898238949)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
MoviesController::index: test_0006_returns an empty array if there are no movies
--------------------------------------------------------------------------------
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/movies" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:44:09", updated_at: "2017-11-07 18:44:09", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (0.74ms)
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:44:09", updated_at: "2017-11-07 18:44:09", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (0.54ms)
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:44:09", updated_at: "2017-11-07 18:44:09", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (0.53ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
CustomersController::index: test_0006_returns an empty array if there are no customer
-------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.15ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:44:09", updated_at: "2017-11-07 18:44:09", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (0.72ms)
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
No serializer found for resource: #<Customer id: 980190962, name: "MyString", registered_at: "MyString", address: "MyString", city: "MyString", state: "MyString", postal_code: "MyString", phone: "MyString", created_at: "2017-11-07 18:44:09", updated_at: "2017-11-07 18:44:09", account_credit: nil, movies_checked_out_count: 0>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Customer::ActiveRecord_Relation (0.73ms)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-07 18:44:09.599396"], ["updated_at", "2017-11-07 18:44:09.599396"], ["available_inventory", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 5ms (Views: 1.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 400 Bad Request in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
MoviesController::show: test_0003_returns the right information
---------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-07 10:44:09 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 19:11:15.909177', '2017-11-07 19:11:15.909177', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2017-11-07 19:11:15.909177', '2017-11-07 19:11:15.909177', 298486374)[0m
  [1m[36mFixture Delete (5.5ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 19:11:15.917631', '2017-11-07 19:11:15.917631', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 19:11:15.917631', '2017-11-07 19:11:15.917631', 898238949)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 11:11:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 22ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 11:11:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 11:11:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
CustomersController::index: test_0006_returns an empty array if there are no customer
-------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/customers" for 127.0.0.1 at 2017-11-07 11:11:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 11:11:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 11:11:15 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 11:11:15 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 28ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
MoviesController::index: test_0006_returns an empty array if there are no movies
--------------------------------------------------------------------------------
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/movies" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.8ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 5ms (Views: 0.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-07 19:11:16.095290"], ["updated_at", "2017-11-07 19:11:16.095290"], ["available_inventory", 10]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
MoviesController::show: test_0003_returns the right information
---------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 11:11:16 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (126.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "VideoStoreAPI_test"[0m
  [1m[35m (326.0ms)[0m  [1m[35mCREATE DATABASE "VideoStoreAPI_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "name" character varying, "registered_at" character varying, "address" character varying, "city" character varying, "state" character varying, "postal_code" character varying, "phone" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "account_credit" float, "movies_checked_out_count" integer DEFAULT 0 NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "movies" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "movies" ("id" bigserial primary key, "title" character varying, "overview" character varying, "release_date" character varying, "inventory" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "available_inventory" integer)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "rentals" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "rentals" ("id" bigserial primary key, "due_date" character varying, "customer_id" integer, "movie_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20171107194817)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20171106202253),
(20171106202612),
(20171106203250),
(20171106220629),
(20171106232634);

[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2017-11-07 21:56:23.580115"], ["updated_at", "2017-11-07 21:56:23.580115"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 21:56:23.838673', '2017-11-07 21:56:23.838673', 848125802)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 21:56:23.838673', '2017-11-07 21:56:23.838673', 976610846)[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 21:56:23.864653', '2017-11-07 21:56:23.864653', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 21:56:23.864653', '2017-11-07 21:56:23.864653', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 21:59:31.787125', '2017-11-07 21:59:31.787125', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 21:59:31.787125', '2017-11-07 21:59:31.787125', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 21:59:31.795900', '2017-11-07 21:59:31.795900', 287487352)[0m
  [1m[36mFixture Insert (1.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 21:59:31.795900', '2017-11-07 21:59:31.795900', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 21:59:47.953485', '2017-11-07 21:59:47.953485', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 21:59:47.953485', '2017-11-07 21:59:47.953485', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 21:59:47.962312', '2017-11-07 21:59:47.962312', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 21:59:47.962312', '2017-11-07 21:59:47.962312', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:05:49.294161', '2017-11-07 22:05:49.294161', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:05:49.294161', '2017-11-07 22:05:49.294161', 976610846)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:05:49.304966', '2017-11-07 22:05:49.304966', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:05:49.304966', '2017-11-07 22:05:49.304966', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:05:49.326405', '2017-11-07 22:05:49.326405', 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:05:49.326405', '2017-11-07 22:05:49.326405', 298486374)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:06:39.537212', '2017-11-07 22:06:39.537212', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:06:39.537212', '2017-11-07 22:06:39.537212', 976610846)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:06:39.547281', '2017-11-07 22:06:39.547281', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:06:39.547281', '2017-11-07 22:06:39.547281', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:06:39.563563', '2017-11-07 22:06:39.563563', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:06:39.563563', '2017-11-07 22:06:39.563563', 298486374)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:07:29.785493', '2017-11-07 22:07:29.785493', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:07:29.785493', '2017-11-07 22:07:29.785493', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:07:29.793829', '2017-11-07 22:07:29.793829', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:07:29.793829', '2017-11-07 22:07:29.793829', 898238949)[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:07:29.800867', '2017-11-07 22:07:29.800867', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:07:29.800867', '2017-11-07 22:07:29.800867', 298486374)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:07:29 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"1", "movie"=>"1"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (11.2ms)[0m  [1m[32mINSERT INTO "rentals" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-07 22:07:29.930091"], ["updated_at", "2017-11-07 22:07:29.930091"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 11.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:08:02.014753', '2017-11-07 22:08:02.014753', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:08:02.014753', '2017-11-07 22:08:02.014753', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:08:02.022937', '2017-11-07 22:08:02.022937', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:08:02.022937', '2017-11-07 22:08:02.022937', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:08:02.028546', '2017-11-07 22:08:02.028546', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:08:02.028546', '2017-11-07 22:08:02.028546', 298486374)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:08:02 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>"#<Rental:0x007fddb5eb0ee8>"}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-07 22:08:02.153198"], ["updated_at", "2017-11-07 22:08:02.153198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:10:46.823082', '2017-11-07 22:10:46.823082', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:10:46.823082', '2017-11-07 22:10:46.823082', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:10:46.834324', '2017-11-07 22:10:46.834324', 287487352)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:10:46.834324', '2017-11-07 22:10:46.834324', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:10:46.848273', '2017-11-07 22:10:46.848273', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:10:46.848273', '2017-11-07 22:10:46.848273', 298486374)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:10:46 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>"#<Rental:0x007fddb4efe9a0>"}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-07 22:10:47.005633"], ["updated_at", "2017-11-07 22:10:47.005633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (5.7ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:23:54.993389', '2017-11-07 22:23:54.993389', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:23:54.993389', '2017-11-07 22:23:54.993389', 976610846)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:23:55.010892', '2017-11-07 22:23:55.010892', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:23:55.010892', '2017-11-07 22:23:55.010892', 898238949)[0m
  [1m[36mFixture Delete (6.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:23:55.020160', '2017-11-07 22:23:55.020160', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:23:55.020160', '2017-11-07 22:23:55.020160', 298486374)[0m
  [1m[35m (17.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:23:55 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>"#<Rental:0x007fddb4e2e520>"}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-07 22:23:55.189626"], ["updated_at", "2017-11-07 22:23:55.189626"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:23:55 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-07 22:23:55.199385"], ["updated_at", "2017-11-07 22:23:55.199385"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:33:06.872782', '2017-11-07 22:33:06.872782', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:33:06.872782', '2017-11-07 22:33:06.872782', 976610846)[0m
  [1m[36mFixture Delete (5.6ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:33:06.894229', '2017-11-07 22:33:06.894229', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:33:06.894229', '2017-11-07 22:33:06.894229', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:33:06.909899', '2017-11-07 22:33:06.909899', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:33:06.909899', '2017-11-07 22:33:06.909899', 298486374)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:33:07 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>"#<Rental:0x007fddb5bb2660>"}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 14ms (Views: 0.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:33:07 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:34:46.322582', '2017-11-07 22:34:46.322582', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:34:46.322582', '2017-11-07 22:34:46.322582', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:34:46.333201', '2017-11-07 22:34:46.333201', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:34:46.333201', '2017-11-07 22:34:46.333201', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:34:46.348702', '2017-11-07 22:34:46.348702', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:34:46.348702', '2017-11-07 22:34:46.348702', 298486374)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:34:46 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 9ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:34:46 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>"#<Rental:0x007fddb4309aa0>"}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:35:27.276581', '2017-11-07 22:35:27.276581', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:35:27.276581', '2017-11-07 22:35:27.276581', 976610846)[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:35:27.286148', '2017-11-07 22:35:27.286148', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:35:27.286148', '2017-11-07 22:35:27.286148', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:35:27.302990', '2017-11-07 22:35:27.302990', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:35:27.302990', '2017-11-07 22:35:27.302990', 298486374)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:35:27 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 10ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:35:27 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:35:45.771895', '2017-11-07 22:35:45.771895', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:35:45.771895', '2017-11-07 22:35:45.771895', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:35:45.780839', '2017-11-07 22:35:45.780839', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:35:45.780839', '2017-11-07 22:35:45.780839', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:35:45.786877', '2017-11-07 22:35:45.786877', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:35:45.786877', '2017-11-07 22:35:45.786877', 298486374)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:35:45 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 9ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:36:54.017987', '2017-11-07 22:36:54.017987', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:36:54.017987', '2017-11-07 22:36:54.017987', 976610846)[0m
  [1m[36mFixture Delete (1.6ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (11.9ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:36:54.034840', '2017-11-07 22:36:54.034840', 287487352)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:36:54.034840', '2017-11-07 22:36:54.034840', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:36:54.069901', '2017-11-07 22:36:54.069901', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:36:54.069901', '2017-11-07 22:36:54.069901', 298486374)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:36:54 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 9ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:36:54 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:39:00.270016', '2017-11-07 22:39:00.270016', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:39:00.270016', '2017-11-07 22:39:00.270016', 976610846)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:39:00.280188', '2017-11-07 22:39:00.280188', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:39:00.280188', '2017-11-07 22:39:00.280188', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:39:00.296765', '2017-11-07 22:39:00.296765', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:39:00.296765', '2017-11-07 22:39:00.296765', 298486374)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:39:00 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 17ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:39:00 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (5.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:40:27.998011', '2017-11-07 22:40:27.998011', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:40:27.998011', '2017-11-07 22:40:27.998011', 976610846)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:40:28.013493', '2017-11-07 22:40:28.013493', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:40:28.013493', '2017-11-07 22:40:28.013493', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:40:28.028892', '2017-11-07 22:40:28.028892', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:40:28.028892', '2017-11-07 22:40:28.028892', 298486374)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:40:28 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 16ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:40:28 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"1"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:40:58.306506', '2017-11-07 22:40:58.306506', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:40:58.306506', '2017-11-07 22:40:58.306506', 976610846)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:40:58.324931', '2017-11-07 22:40:58.324931', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:40:58.324931', '2017-11-07 22:40:58.324931', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:40:58.335883', '2017-11-07 22:40:58.335883', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:40:58.335883', '2017-11-07 22:40:58.335883', 298486374)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:40:58 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 17ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:40:58 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"1"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (3.0ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:41:09.943294', '2017-11-07 22:41:09.943294', 848125802)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:41:09.943294', '2017-11-07 22:41:09.943294', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (1.8ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:41:09.961362', '2017-11-07 22:41:09.961362', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:41:09.961362', '2017-11-07 22:41:09.961362', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:41:09.974746', '2017-11-07 22:41:09.974746', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:41:09.974746', '2017-11-07 22:41:09.974746', 298486374)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:41:10 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 15ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:41:10 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:42:42.276157', '2017-11-07 22:42:42.276157', 848125802)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:42:42.276157', '2017-11-07 22:42:42.276157', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:42:42.293040', '2017-11-07 22:42:42.293040', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:42:42.293040', '2017-11-07 22:42:42.293040', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:42:42.304070', '2017-11-07 22:42:42.304070', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:42:42.304070', '2017-11-07 22:42:42.304070', 298486374)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:42:42 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 15ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:42:42 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:43:16.155878', '2017-11-07 22:43:16.155878', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:43:16.155878', '2017-11-07 22:43:16.155878', 976610846)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:43:16.172468', '2017-11-07 22:43:16.172468', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:43:16.172468', '2017-11-07 22:43:16.172468', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:43:16.186793', '2017-11-07 22:43:16.186793', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:43:16.186793', '2017-11-07 22:43:16.186793', 298486374)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:43:16 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 23ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:43:16 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:43:41.913483', '2017-11-07 22:43:41.913483', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:43:41.913483', '2017-11-07 22:43:41.913483', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:43:41.922723', '2017-11-07 22:43:41.922723', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:43:41.922723', '2017-11-07 22:43:41.922723', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:43:41.932477', '2017-11-07 22:43:41.932477', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:43:41.932477', '2017-11-07 22:43:41.932477', 298486374)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:43:42 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 13ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:43:42 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.7ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 11ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:46:51.108908', '2017-11-07 22:46:51.108908', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:46:51.108908', '2017-11-07 22:46:51.108908', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:46:51.117513', '2017-11-07 22:46:51.117513', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:46:51.117513', '2017-11-07 22:46:51.117513', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-12-12', 0, 0, '2017-11-07 22:46:51.123197', '2017-11-07 22:46:51.123197', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at", "id") VALUES ('2017-05-20', 0, 0, '2017-11-07 22:46:51.123197', '2017-11-07 22:46:51.123197', 298486374)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:46:51 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 9ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:46:51 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (5.9ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:49:50.708355', '2017-11-07 22:49:50.708355', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:49:50.708355', '2017-11-07 22:49:50.708355', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:49:50.726832', '2017-11-07 22:49:50.726832', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:49:50.726832', '2017-11-07 22:49:50.726832', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 22:49:50.735719', '2017-11-07 22:49:50.735719', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 22:49:50.735719', '2017-11-07 22:49:50.735719', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:49:50 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 9ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:49:50 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:50:06.527072', '2017-11-07 22:50:06.527072', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:50:06.527072', '2017-11-07 22:50:06.527072', 976610846)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:50:06.543816', '2017-11-07 22:50:06.543816', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:50:06.543816', '2017-11-07 22:50:06.543816', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 22:50:06.565390', '2017-11-07 22:50:06.565390', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 22:50:06.565390', '2017-11-07 22:50:06.565390', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:50:06 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>"#<Rental:0x007fddb4ff3888>"}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 10ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.1ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:50:06 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (6.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:50:41.541597', '2017-11-07 22:50:41.541597', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:50:41.541597', '2017-11-07 22:50:41.541597', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:50:41.564197', '2017-11-07 22:50:41.564197', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:50:41.564197', '2017-11-07 22:50:41.564197', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 22:50:41.572616', '2017-11-07 22:50:41.572616', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 22:50:41.572616', '2017-11-07 22:50:41.572616', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:50:41 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 20ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals" for 127.0.0.1 at 2017-11-07 14:50:41 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (7.0ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:56:55.985157', '2017-11-07 22:56:55.985157', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:56:55.985157', '2017-11-07 22:56:55.985157', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:56:56.005945', '2017-11-07 22:56:56.005945', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:56:56.005945', '2017-11-07 22:56:56.005945', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 22:56:56.016011', '2017-11-07 22:56:56.016011', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 22:56:56.016011', '2017-11-07 22:56:56.016011', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
RentalsController::update: test_0001_should update rental when given valid data
-------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/rentals/980190962" for 127.0.0.1 at 2017-11-07 14:56:56 -0800
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 22:57:21.058426', '2017-11-07 22:57:21.058426', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 22:57:21.058426', '2017-11-07 22:57:21.058426', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 22:57:21.073050', '2017-11-07 22:57:21.073050', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 22:57:21.073050', '2017-11-07 22:57:21.073050', 898238949)[0m
  [1m[36mFixture Delete (3.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 22:57:21.082134', '2017-11-07 22:57:21.082134', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 22:57:21.082134', '2017-11-07 22:57:21.082134', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
RentalsController::update: test_0001_should update rental when given valid data
-------------------------------------------------------------------------------
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/980190962" for 127.0.0.1 at 2017-11-07 14:57:21 -0800
Processing by RentalsController#update as HTML
  Parameters: {"id"=>"980190962"}
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:02:58.588123', '2017-11-07 23:02:58.588123', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:02:58.588123', '2017-11-07 23:02:58.588123', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:02:58.610111', '2017-11-07 23:02:58.610111', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:02:58.610111', '2017-11-07 23:02:58.610111', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:02:58.619042', '2017-11-07 23:02:58.619042', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:02:58.619042', '2017-11-07 23:02:58.619042', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/980190962" for 127.0.0.1 at 2017-11-07 15:02:58 -0800
Processing by RentalsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" IS NULL AND "rentals"."movie_id" IS NULL ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:04:36.894597', '2017-11-07 23:04:36.894597', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:04:36.894597', '2017-11-07 23:04:36.894597', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:04:36.902689', '2017-11-07 23:04:36.902689', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:04:36.902689', '2017-11-07 23:04:36.902689', 898238949)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:04:36.908424', '2017-11-07 23:04:36.908424', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:04:36.908424', '2017-11-07 23:04:36.908424', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/980190962" for 127.0.0.1 at 2017-11-07 15:04:37 -0800
Processing by RentalsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" IS NULL AND "rentals"."movie_id" IS NULL ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:21:05.646325', '2017-11-07 23:21:05.646325', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:21:05.646325', '2017-11-07 23:21:05.646325', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (5.6ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:21:05.655011', '2017-11-07 23:21:05.655011', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:21:05.655011', '2017-11-07 23:21:05.655011', 898238949)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:21:05.673261', '2017-11-07 23:21:05.673261', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:21:05.673261', '2017-11-07 23:21:05.673261', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 15:21:05 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 15ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 15:21:05 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"1", "movie_id"=>"1"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
Started PATCH "/rentals/check-in.980190962" for 127.0.0.1 at 2017-11-07 15:21:05 -0800
Processing by RentalsController#update as 
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" IS NULL AND "rentals"."movie_id" IS NULL ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:25:45.461524', '2017-11-07 23:25:45.461524', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:25:45.461524', '2017-11-07 23:25:45.461524', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:25:45.469836', '2017-11-07 23:25:45.469836', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:25:45.469836', '2017-11-07 23:25:45.469836', 898238949)[0m
  [1m[36mFixture Delete (6.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:25:45.476482', '2017-11-07 23:25:45.476482', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:25:45.476482', '2017-11-07 23:25:45.476482', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (1.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:25:45 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "rental_movie_id"=>"287487352"}}
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" IS NULL AND "rentals"."movie_id" IS NULL ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:28:05.043267', '2017-11-07 23:28:05.043267', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:28:05.043267', '2017-11-07 23:28:05.043267', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:28:05.051994', '2017-11-07 23:28:05.051994', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:28:05.051994', '2017-11-07 23:28:05.051994', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:28:05.058164', '2017-11-07 23:28:05.058164', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:28:05.058164', '2017-11-07 23:28:05.058164', 298486374, 898238949, 848125802)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:28:05 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "rental_movie_id"=>"287487352"}}
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" IS NULL AND "rentals"."movie_id" IS NULL ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:29:50.112498', '2017-11-07 23:29:50.112498', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:29:50.112498', '2017-11-07 23:29:50.112498', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (4.9ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:29:50.121020', '2017-11-07 23:29:50.121020', 287487352)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:29:50.121020', '2017-11-07 23:29:50.121020', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:29:50.136743', '2017-11-07 23:29:50.136743', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:29:50.136743', '2017-11-07 23:29:50.136743', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:29:50 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "rental_movie_id"=>"287487352"}}
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" IS NULL AND "rentals"."movie_id" IS NULL ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (1.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:30:44.158065', '2017-11-07 23:30:44.158065', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:30:44.158065', '2017-11-07 23:30:44.158065', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:30:44.168071', '2017-11-07 23:30:44.168071', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:30:44.168071', '2017-11-07 23:30:44.168071', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:30:44.174042', '2017-11-07 23:30:44.174042', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:30:44.174042', '2017-11-07 23:30:44.174042', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:30:44 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "rental_movie_id"=>"287487352"}}
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" IS NULL ORDER BY "rentals"."id" ASC LIMIT $2[0m  [["customer_id", 976610846], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:31:05.903429', '2017-11-07 23:31:05.903429', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:31:05.903429', '2017-11-07 23:31:05.903429', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:31:05.911626', '2017-11-07 23:31:05.911626', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:31:05.911626', '2017-11-07 23:31:05.911626', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:31:05.917920', '2017-11-07 23:31:05.917920', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:31:05.917920', '2017-11-07 23:31:05.917920', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:31:06 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "rental_movie_id"=>"287487352"}}
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" IS NULL ORDER BY "rentals"."id" ASC LIMIT $2[0m  [["customer_id", 976610846], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:31:44.620636', '2017-11-07 23:31:44.620636', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:31:44.620636', '2017-11-07 23:31:44.620636', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:31:44.628481', '2017-11-07 23:31:44.628481', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:31:44.628481', '2017-11-07 23:31:44.628481', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:31:44.634316', '2017-11-07 23:31:44.634316', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:31:44.634316', '2017-11-07 23:31:44.634316', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:31:44 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "rental_movie_id"=>"287487352"}}
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" IS NULL ORDER BY "rentals"."id" ASC LIMIT $2[0m  [["customer_id", 976610846], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:32:14.009033', '2017-11-07 23:32:14.009033', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:32:14.009033', '2017-11-07 23:32:14.009033', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:32:14.017364', '2017-11-07 23:32:14.017364', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:32:14.017364', '2017-11-07 23:32:14.017364', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:32:14.023336', '2017-11-07 23:32:14.023336', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:32:14.023336', '2017-11-07 23:32:14.023336', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:32:14 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 ORDER BY "rentals"."id" ASC LIMIT $3[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (5.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:43:01.244783', '2017-11-07 23:43:01.244783', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:43:01.244783', '2017-11-07 23:43:01.244783', 976610846)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:43:01.260068', '2017-11-07 23:43:01.260068', 287487352)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:43:01.260068', '2017-11-07 23:43:01.260068', 898238949)[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:43:01.273890', '2017-11-07 23:43:01.273890', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:43:01.273890', '2017-11-07 23:43:01.273890', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 15:43:01 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 16ms (Views: 0.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:44:40.401302', '2017-11-07 23:44:40.401302', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:44:40.401302', '2017-11-07 23:44:40.401302', 976610846)[0m
  [1m[36mFixture Delete (1.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (3.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:44:40.413441', '2017-11-07 23:44:40.413441', 287487352)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:44:40.413441', '2017-11-07 23:44:40.413441', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:44:40.438293', '2017-11-07 23:44:40.438293', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:44:40.438293', '2017-11-07 23:44:40.438293', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 15:44:40 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (5.6ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-07 23:44:40.675833"], ["updated_at", "2017-11-07 23:44:40.675833"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.4ms | ActiveRecord: 6.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (5.9ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:46:43.394557', '2017-11-07 23:46:43.394557', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:46:43.394557', '2017-11-07 23:46:43.394557', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:46:43.419081', '2017-11-07 23:46:43.419081', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:46:43.419081', '2017-11-07 23:46:43.419081', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:46:43.426360', '2017-11-07 23:46:43.426360', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:46:43.426360', '2017-11-07 23:46:43.426360', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:46:43 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:54:59.238923', '2017-11-07 23:54:59.238923', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:54:59.238923', '2017-11-07 23:54:59.238923', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:54:59.255772', '2017-11-07 23:54:59.255772', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:54:59.255772', '2017-11-07 23:54:59.255772', 898238949)[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:54:59.261980', '2017-11-07 23:54:59.261980', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:54:59.261980', '2017-11-07 23:54:59.261980', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.6ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
MoviesController::index: test_0006_returns an empty array if there are no movies
--------------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
MoviesController::show: test_0003_returns the right information
---------------------------------------------------------------
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-07 23:54:59.428463"], ["updated_at", "2017-11-07 23:54:59.428463"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
Rental: test_0001_must be valid
-------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
CustomersController::index: test_0006_returns an empty array if there are no customer
-------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 15:54:59 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-07 23:54:59.516665"], ["updated_at", "2017-11-07 23:54:59.516665"], ["available_inventory", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:57:54.941519', '2017-11-07 23:57:54.941519', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:57:54.941519', '2017-11-07 23:57:54.941519', 976610846)[0m
  [1m[36mFixture Delete (11.5ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:57:54.949964', '2017-11-07 23:57:54.949964', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:57:54.949964', '2017-11-07 23:57:54.949964', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:57:54.973446', '2017-11-07 23:57:54.973446', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:57:54.973446', '2017-11-07 23:57:54.973446', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-07 23:57:55.036412"], ["updated_at", "2017-11-07 23:57:55.036412"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0002_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
MoviesController::index: test_0006_returns an empty array if there are no movies
--------------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 898238949]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
CustomersController::index: test_0006_returns an empty array if there are no customer
-------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 976610846]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
MoviesController::show: test_0003_returns the right information
---------------------------------------------------------------
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-07 23:57:55.155565"], ["updated_at", "2017-11-07 23:57:55.155565"], ["available_inventory", 10]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 15:57:55 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:59:08.559070', '2017-11-07 23:59:08.559070', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:59:08.559070', '2017-11-07 23:59:08.559070', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:59:08.567790', '2017-11-07 23:59:08.567790', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:59:08.567790', '2017-11-07 23:59:08.567790', 898238949)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:59:08.573425', '2017-11-07 23:59:08.573425', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:59:08.573425', '2017-11-07 23:59:08.573425', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-07 23:59:34.367482', '2017-11-07 23:59:34.367482', 848125802)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-07 23:59:34.367482', '2017-11-07 23:59:34.367482', 976610846)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-07 23:59:34.381870', '2017-11-07 23:59:34.381870', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-07 23:59:34.381870', '2017-11-07 23:59:34.381870', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-07 23:59:34.399870', '2017-11-07 23:59:34.399870', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-07 23:59:34.399870', '2017-11-07 23:59:34.399870', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 15:59:34 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.8ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (5.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 01:03:37.458511', '2017-11-08 01:03:37.458511', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 01:03:37.458511', '2017-11-08 01:03:37.458511', 976610846)[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 01:03:37.473023', '2017-11-08 01:03:37.473023', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 01:03:37.473023', '2017-11-08 01:03:37.473023', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 01:03:37.487538', '2017-11-08 01:03:37.487538', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 01:03:37.487538', '2017-11-08 01:03:37.487538', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 17:03:37 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.6ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 01:03:37.668285"], ["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 01:03:37.674470"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 01:03:37.677252"], ["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 01:04:10.995482', '2017-11-08 01:04:10.995482', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 01:04:10.995482', '2017-11-08 01:04:10.995482', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 01:04:11.004715', '2017-11-08 01:04:11.004715', 287487352)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 01:04:11.004715', '2017-11-08 01:04:11.004715', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 01:04:11.017330', '2017-11-08 01:04:11.017330', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 01:04:11.017330', '2017-11-08 01:04:11.017330', 298486374, 898238949, 848125802)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 17:04:11 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (5.8ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 01:04:11.205161"], ["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 01:04:11.214661"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 01:04:11.217654"], ["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 40ms (Views: 0.3ms | ActiveRecord: 8.2ms)
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 01:05:15.940280', '2017-11-08 01:05:15.940280', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 01:05:15.940280', '2017-11-08 01:05:15.940280', 976610846)[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 01:05:15.952903', '2017-11-08 01:05:15.952903', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 01:05:15.952903', '2017-11-08 01:05:15.952903', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 01:05:15.970010', '2017-11-08 01:05:15.970010', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 01:05:15.970010', '2017-11-08 01:05:15.970010', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 17:05:16 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 01:05:16.150810"], ["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 01:05:16.154521"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 01:05:16.157253"], ["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.3ms | ActiveRecord: 2.7ms)
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 01:05:28.332758', '2017-11-08 01:05:28.332758', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 01:05:28.332758', '2017-11-08 01:05:28.332758', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 01:05:28.340340', '2017-11-08 01:05:28.340340', 287487352)[0m
  [1m[36mFixture Insert (1.6ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 01:05:28.340340', '2017-11-08 01:05:28.340340', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 01:05:28.347954', '2017-11-08 01:05:28.347954', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 01:05:28.347954', '2017-11-08 01:05:28.347954', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 17:05:28 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 01:05:28.503362"], ["id", 298486374]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 01:05:28.508651"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 01:05:28.511561"], ["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.4ms | ActiveRecord: 2.9ms)
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 01:06:14.521668', '2017-11-08 01:06:14.521668', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 01:06:14.521668', '2017-11-08 01:06:14.521668', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 01:06:14.529350', '2017-11-08 01:06:14.529350', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 01:06:14.529350', '2017-11-08 01:06:14.529350', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 01:06:14.539805', '2017-11-08 01:06:14.539805', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 01:06:14.539805', '2017-11-08 01:06:14.539805', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 17:06:14 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.7ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 01:07:28.142112"], ["id", 298486374]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (5.7ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 01:08:29.148697', '2017-11-08 01:08:29.148697', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 01:08:29.148697', '2017-11-08 01:08:29.148697', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 01:08:29.164192', '2017-11-08 01:08:29.164192', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 01:08:29.164192', '2017-11-08 01:08:29.164192', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 01:08:29.178011', '2017-11-08 01:08:29.178011', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 01:08:29.178011', '2017-11-08 01:08:29.178011', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 17:08:29 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (3.6ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" LIMIT $1[0m  [["LIMIT", 11]]
Unpermitted parameter: :rental
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (5.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 01:15:20.815978', '2017-11-08 01:15:20.815978', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 01:15:20.815978', '2017-11-08 01:15:20.815978', 976610846)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 01:15:20.831228', '2017-11-08 01:15:20.831228', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 01:15:20.831228', '2017-11-08 01:15:20.831228', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 01:15:20.844570', '2017-11-08 01:15:20.844570', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 01:15:20.844570', '2017-11-08 01:15:20.844570', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 17:15:20 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (12.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 01:15:21.042528"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 01:15:21.046253"], ["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 9], ["updated_at", "2017-11-08 01:15:21.049104"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 52ms (Views: 0.2ms | ActiveRecord: 14.8ms)
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 01:17:08.365053', '2017-11-08 01:17:08.365053', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 01:17:08.365053', '2017-11-08 01:17:08.365053', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 01:17:08.373737', '2017-11-08 01:17:08.373737', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 01:17:08.373737', '2017-11-08 01:17:08.373737', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 01:17:08.379717', '2017-11-08 01:17:08.379717', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 01:17:08.379717', '2017-11-08 01:17:08.379717', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 17:17:08 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 01:17:08.537938"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 01:17:08.541515"], ["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 9], ["updated_at", "2017-11-08 01:17:08.544301"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 2.6ms)
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mRental Load (0.1ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 01:18:24.236266', '2017-11-08 01:18:24.236266', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 01:18:24.236266', '2017-11-08 01:18:24.236266', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 01:18:24.244469', '2017-11-08 01:18:24.244469', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 01:18:24.244469', '2017-11-08 01:18:24.244469', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 01:18:24.259484', '2017-11-08 01:18:24.259484', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 01:18:24.259484', '2017-11-08 01:18:24.259484', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
RentalsController::update: test_0003_should returns the right information
-------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 17:18:24 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.6ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 01:18:24.427906"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 01:18:24.431401"], ["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 9], ["updated_at", "2017-11-08 01:18:24.434090"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (18.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 04:29:08.667968', '2017-11-08 04:29:08.667968', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 04:29:08.667968', '2017-11-08 04:29:08.667968', 976610846)[0m
  [1m[36mFixture Delete (6.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:29:08.716102', '2017-11-08 04:29:08.716102', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:29:08.716102', '2017-11-08 04:29:08.716102', 898238949)[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:29:08.729527', '2017-11-08 04:29:08.729527', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:29:08.729527', '2017-11-08 04:29:08.729527', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', '2017-11-08 04:29:21.450246', '2017-11-08 04:29:21.450246', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', '2017-11-08 04:29:21.450246', '2017-11-08 04:29:21.450246', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:29:21.458202', '2017-11-08 04:29:21.458202', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:29:21.458202', '2017-11-08 04:29:21.458202', 898238949)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:29:21.464560', '2017-11-08 04:29:21.464560', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:29:21.464560', '2017-11-08 04:29:21.464560', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:29:21 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (12.9ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:29:21.634304"], ["updated_at", "2017-11-08 04:29:21.634304"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 13.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:30:30.028104', '2017-11-08 04:30:30.028104', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:30:30.028104', '2017-11-08 04:30:30.028104', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:30:30.038355', '2017-11-08 04:30:30.038355', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:30:30.038355', '2017-11-08 04:30:30.038355', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:30:30.048492', '2017-11-08 04:30:30.048492', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:30:30.048492', '2017-11-08 04:30:30.048492', 298486374, 898238949, 848125802)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:30:30 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:30:30.232191"], ["updated_at", "2017-11-08 04:30:30.232191"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:30:53.326026', '2017-11-08 04:30:53.326026', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:30:53.326026', '2017-11-08 04:30:53.326026', 976610846)[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:30:53.335859', '2017-11-08 04:30:53.335859', 287487352)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:30:53.335859', '2017-11-08 04:30:53.335859', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:30:53.383428', '2017-11-08 04:30:53.383428', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:30:53.383428', '2017-11-08 04:30:53.383428', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:31:39 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.8ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:31:39.121563"], ["updated_at", "2017-11-08 04:31:39.121563"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 93ms (Views: 0.7ms | ActiveRecord: 3.1ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:32:17.754957', '2017-11-08 04:32:17.754957', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:32:17.754957', '2017-11-08 04:32:17.754957', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:32:17.763450', '2017-11-08 04:32:17.763450', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:32:17.763450', '2017-11-08 04:32:17.763450', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:32:17.774695', '2017-11-08 04:32:17.774695', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:32:17.774695', '2017-11-08 04:32:17.774695', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:32:27.880080', '2017-11-08 04:32:27.880080', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:32:27.880080', '2017-11-08 04:32:27.880080', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:32:27.888298', '2017-11-08 04:32:27.888298', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:32:27.888298', '2017-11-08 04:32:27.888298', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:32:27.894284', '2017-11-08 04:32:27.894284', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (2.6ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:32:27.894284', '2017-11-08 04:32:27.894284', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:32:28 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:32:28.058031"], ["updated_at", "2017-11-08 04:32:28.058031"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:33:25.396318', '2017-11-08 04:33:25.396318', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:33:25.396318', '2017-11-08 04:33:25.396318', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:33:25.416426', '2017-11-08 04:33:25.416426', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:33:25.416426', '2017-11-08 04:33:25.416426', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:33:25.427433', '2017-11-08 04:33:25.427433', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:33:25.427433', '2017-11-08 04:33:25.427433', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:33:25 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:33:25.577040"], ["updated_at", "2017-11-08 04:33:25.577040"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:33:34.917921', '2017-11-08 04:33:34.917921', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:33:34.917921', '2017-11-08 04:33:34.917921', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:33:34.927176', '2017-11-08 04:33:34.927176', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:33:34.927176', '2017-11-08 04:33:34.927176', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:33:34.938092', '2017-11-08 04:33:34.938092', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:33:34.938092', '2017-11-08 04:33:34.938092', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:33:35 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:33:35.094359"], ["updated_at", "2017-11-08 04:33:35.094359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:33:48.492000', '2017-11-08 04:33:48.492000', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:33:48.492000', '2017-11-08 04:33:48.492000', 976610846)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:33:48.502667', '2017-11-08 04:33:48.502667', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:33:48.502667', '2017-11-08 04:33:48.502667', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:33:48.516725', '2017-11-08 04:33:48.516725', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:33:48.516725', '2017-11-08 04:33:48.516725', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (6.7ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:33:48 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:33:48.699484"], ["updated_at", "2017-11-08 04:33:48.699484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:33:58.033715', '2017-11-08 04:33:58.033715', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:33:58.033715', '2017-11-08 04:33:58.033715', 976610846)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:33:58.045323', '2017-11-08 04:33:58.045323', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:33:58.045323', '2017-11-08 04:33:58.045323', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:33:58.061748', '2017-11-08 04:33:58.061748', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:33:58.061748', '2017-11-08 04:33:58.061748', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:33:58 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:33:58.222273"], ["updated_at", "2017-11-08 04:33:58.222273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (6.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:34:07.216599', '2017-11-08 04:34:07.216599', 848125802)[0m
  [1m[36mFixture Insert (4.0ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:34:07.216599', '2017-11-08 04:34:07.216599', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:34:07.240002', '2017-11-08 04:34:07.240002', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:34:07.240002', '2017-11-08 04:34:07.240002', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:34:07.255041', '2017-11-08 04:34:07.255041', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:34:07.255041', '2017-11-08 04:34:07.255041', 298486374, 898238949, 848125802)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:34:07 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:34:07.431329"], ["updated_at", "2017-11-08 04:34:07.431329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:37:34.093069', '2017-11-08 04:37:34.093069', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:37:34.093069', '2017-11-08 04:37:34.093069', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:37:34.101158', '2017-11-08 04:37:34.101158', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:37:34.101158', '2017-11-08 04:37:34.101158', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:37:34.113086', '2017-11-08 04:37:34.113086', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:37:34.113086', '2017-11-08 04:37:34.113086', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:37:34 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:37:34.335796"], ["updated_at", "2017-11-08 04:37:34.335796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:38:08.918611', '2017-11-08 04:38:08.918611', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:38:08.918611', '2017-11-08 04:38:08.918611', 976610846)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:38:08.929270', '2017-11-08 04:38:08.929270', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:38:08.929270', '2017-11-08 04:38:08.929270', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:38:08.946213', '2017-11-08 04:38:08.946213', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:38:08.946213', '2017-11-08 04:38:08.946213', 298486374, 898238949, 848125802)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:38:09 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:38:09.119112"], ["updated_at", "2017-11-08 04:38:09.119112"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (5.8ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:40:12.695959', '2017-11-08 04:40:12.695959', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:40:12.695959', '2017-11-08 04:40:12.695959', 976610846)[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:40:12.711721', '2017-11-08 04:40:12.711721', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:40:12.711721', '2017-11-08 04:40:12.711721', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:40:12.725910', '2017-11-08 04:40:12.725910', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:40:12.725910', '2017-11-08 04:40:12.725910', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::create: test_0003_should decrease the movie avilable_inventory by 1
--------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:40:12 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:40:12.904591"], ["updated_at", "2017-11-08 04:40:12.904591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:40:34.674109', '2017-11-08 04:40:34.674109', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:40:34.674109', '2017-11-08 04:40:34.674109', 976610846)[0m
  [1m[36mFixture Delete (4.5ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:40:34.685721', '2017-11-08 04:40:34.685721', 287487352)[0m
  [1m[36mFixture Insert (6.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:40:34.685721', '2017-11-08 04:40:34.685721', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:40:34.705554', '2017-11-08 04:40:34.705554', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:40:34.705554', '2017-11-08 04:40:34.705554', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::create: test_0003_should decrease the movie avilable_inventory by 1
--------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:40:34 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:40:34.883936"], ["updated_at", "2017-11-08 04:40:34.883936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 04:42:31.570830', '2017-11-08 04:42:31.570830', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 04:42:31.570830', '2017-11-08 04:42:31.570830', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 04:42:31.579477', '2017-11-08 04:42:31.579477', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 04:42:31.579477', '2017-11-08 04:42:31.579477', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 04:42:31.585051', '2017-11-08 04:42:31.585051', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 04:42:31.585051', '2017-11-08 04:42:31.585051', 298486374, 898238949, 848125802)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
MoviesController::show: test_0003_returns the right information
---------------------------------------------------------------
  [1m[36mMovie Load (0.8ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
RentalsController::update: test_0003_should returns the right information
-------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (12.1ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 04:42:31.696359"], ["id", 980190962]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 41ms (Views: 0.3ms | ActiveRecord: 13.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 04:42:31.710455"], ["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 04:42:31.718881"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 1.1ms | ActiveRecord: 6.3ms)
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RentalsController::update: test_0006_should 
--------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should increase the customer's movie_checked_out_count by 1
------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.1ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0005_should decrease the movie's avilable_inventory by 1
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.1ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:42:31.749397"], ["updated_at", "2017-11-08 04:42:31.749397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:42:31.761694"], ["updated_at", "2017-11-08 04:42:31.761694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::create: test_0003_should decrease the movie avilable_inventory by 1
--------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 04:42:31.775350"], ["updated_at", "2017-11-08 04:42:31.775350"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.8ms)
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0004_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 13ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 6ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
CustomersController::index: test_0006_returns an empty array if there are no customer
-------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 848125802]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/customers" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-08 04:42:31.867749"], ["updated_at", "2017-11-08 04:42:31.867749"], ["available_inventory", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.7ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (3.5ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 3.5ms)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
MoviesController::index: test_0006_returns an empty array if there are no movies
--------------------------------------------------------------------------------
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 287487352]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 898238949]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/movies" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.8ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-07 20:42:31 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.6ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (5.8ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 17:42:55.435784', '2017-11-08 17:42:55.435784', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 17:42:55.435784', '2017-11-08 17:42:55.435784', 976610846)[0m
  [1m[36mFixture Delete (6.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 17:42:55.457991', '2017-11-08 17:42:55.457991', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 17:42:55.457991', '2017-11-08 17:42:55.457991', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 17:42:55.471610', '2017-11-08 17:42:55.471610', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 17:42:55.471610', '2017-11-08 17:42:55.471610', 298486374, 898238949, 848125802)[0m
  [1m[35m (12.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 09:42:55 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 17:42:55.660814"], ["updated_at", "2017-11-08 17:42:55.660814"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 17:47:32.917495', '2017-11-08 17:47:32.917495', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 17:47:32.917495', '2017-11-08 17:47:32.917495', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (4.5ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 17:47:32.926349', '2017-11-08 17:47:32.926349', 287487352)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 17:47:32.926349', '2017-11-08 17:47:32.926349', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 17:47:32.938102', '2017-11-08 17:47:32.938102', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 17:47:32.938102', '2017-11-08 17:47:32.938102', 298486374, 898238949, 848125802)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 09:47:33 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 17:47:33.119082"], ["updated_at", "2017-11-08 17:47:33.119082"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 17:48:07.398099', '2017-11-08 17:48:07.398099', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 17:48:07.398099', '2017-11-08 17:48:07.398099', 976610846)[0m
  [1m[36mFixture Delete (1.9ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 17:48:07.407042', '2017-11-08 17:48:07.407042', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 17:48:07.407042', '2017-11-08 17:48:07.407042', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 17:48:07.422109', '2017-11-08 17:48:07.422109', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 17:48:07.422109', '2017-11-08 17:48:07.422109', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 09:48:07 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 17:48:07.568117"], ["updated_at", "2017-11-08 17:48:07.568117"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 17:49:18.901602', '2017-11-08 17:49:18.901602', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 17:49:18.901602', '2017-11-08 17:49:18.901602', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 17:49:18.912066', '2017-11-08 17:49:18.912066', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 17:49:18.912066', '2017-11-08 17:49:18.912066', 898238949)[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 17:49:18.917582', '2017-11-08 17:49:18.917582', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 17:49:18.917582', '2017-11-08 17:49:18.917582', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 09:49:19 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 17:49:19.070159"], ["updated_at", "2017-11-08 17:49:19.070159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (5.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 17:52:25.634726', '2017-11-08 17:52:25.634726', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 17:52:25.634726', '2017-11-08 17:52:25.634726', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 17:52:25.656763', '2017-11-08 17:52:25.656763', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 17:52:25.656763', '2017-11-08 17:52:25.656763', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 17:52:25.665669', '2017-11-08 17:52:25.665669', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 17:52:25.665669', '2017-11-08 17:52:25.665669', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 09:52:25 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 17:52:25.802877"], ["updated_at", "2017-11-08 17:52:25.802877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", 1], ["updated_at", "2017-11-08 17:52:25.805098"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 17:52:25.807230"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 2.0ms)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.7ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 17:52:45.682687', '2017-11-08 17:52:45.682687', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 17:52:45.682687', '2017-11-08 17:52:45.682687', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 17:52:45.692837', '2017-11-08 17:52:45.692837', 287487352)[0m
  [1m[36mFixture Insert (4.8ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 17:52:45.692837', '2017-11-08 17:52:45.692837', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 17:52:45.709358', '2017-11-08 17:52:45.709358', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 17:52:45.709358', '2017-11-08 17:52:45.709358', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 09:52:45 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 17:52:45.889409"], ["updated_at", "2017-11-08 17:52:45.889409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", 1], ["updated_at", "2017-11-08 17:52:45.891325"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 17:52:45.893479"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 2.1ms)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (8.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:08:25.621119', '2017-11-08 20:08:25.621119', 848125802)[0m
  [1m[36mFixture Insert (5.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:08:25.621119', '2017-11-08 20:08:25.621119', 976610846)[0m
  [1m[36mFixture Delete (6.4ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:08:25.656479', '2017-11-08 20:08:25.656479', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:08:25.656479', '2017-11-08 20:08:25.656479', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:08:25.672056', '2017-11-08 20:08:25.672056', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:08:25.672056', '2017-11-08 20:08:25.672056', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (1.0ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:08:25 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:08:25.856989"], ["updated_at", "2017-11-08 20:08:25.856989"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.1ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:19:27.356118', '2017-11-08 20:19:27.356118', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:19:27.356118', '2017-11-08 20:19:27.356118', 976610846)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:19:27.392322', '2017-11-08 20:19:27.392322', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:19:27.392322', '2017-11-08 20:19:27.392322', 898238949)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:19:27.401737', '2017-11-08 20:19:27.401737', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:19:27.401737', '2017-11-08 20:19:27.401737', 298486374, 898238949, 848125802)[0m
  [1m[35m (18.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:19:27 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:19:27.600184"], ["updated_at", "2017-11-08 20:19:27.600184"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:20:01.576571', '2017-11-08 20:20:01.576571', 848125802)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:20:01.576571', '2017-11-08 20:20:01.576571', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:20:01.594365', '2017-11-08 20:20:01.594365', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:20:01.594365', '2017-11-08 20:20:01.594365', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:20:01.604077', '2017-11-08 20:20:01.604077', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:20:01.604077', '2017-11-08 20:20:01.604077', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
RentalsController::create: test_0003_should decrease the movie available_inventory by 1
---------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:20:01 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:20:01.775696"], ["updated_at", "2017-11-08 20:20:01.775696"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 1.0ms | ActiveRecord: 1.2ms)
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:23:29.498203', '2017-11-08 20:23:29.498203', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:23:29.498203', '2017-11-08 20:23:29.498203', 976610846)[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:23:29.506737', '2017-11-08 20:23:29.506737', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:23:29.506737', '2017-11-08 20:23:29.506737', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (5.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:23:29.525669', '2017-11-08 20:23:29.525669', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:23:29.525669', '2017-11-08 20:23:29.525669', 298486374, 898238949, 848125802)[0m
  [1m[35m (11.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:23:29 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:23:29.749708"], ["updated_at", "2017-11-08 20:23:29.749708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.9ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:23:36.179588', '2017-11-08 20:23:36.179588', 848125802)[0m
  [1m[36mFixture Insert (2.0ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:23:36.179588', '2017-11-08 20:23:36.179588', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:23:36.202043', '2017-11-08 20:23:36.202043', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:23:36.202043', '2017-11-08 20:23:36.202043', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:23:36.209295', '2017-11-08 20:23:36.209295', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:23:36.209295', '2017-11-08 20:23:36.209295', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:23:36 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:23:36.344020"], ["updated_at", "2017-11-08 20:23:36.344020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:23:41.711169', '2017-11-08 20:23:41.711169', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:23:41.711169', '2017-11-08 20:23:41.711169', 976610846)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:23:41.726154', '2017-11-08 20:23:41.726154', 287487352)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:23:41.726154', '2017-11-08 20:23:41.726154', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:23:41.742145', '2017-11-08 20:23:41.742145', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:23:41.742145', '2017-11-08 20:23:41.742145', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:23:41 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:23:41.941581"], ["updated_at", "2017-11-08 20:23:41.941581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (3.0ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:24:12.510883', '2017-11-08 20:24:12.510883', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:24:12.510883', '2017-11-08 20:24:12.510883', 976610846)[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (1.7ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:24:12.527588', '2017-11-08 20:24:12.527588', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:24:12.527588', '2017-11-08 20:24:12.527588', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:24:12.540810', '2017-11-08 20:24:12.540810', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:24:12.540810', '2017-11-08 20:24:12.540810', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:24:12 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:24:12.702704"], ["updated_at", "2017-11-08 20:24:12.702704"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 20:24:12.705079"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", 1], ["updated_at", "2017-11-08 20:24:12.707543"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 2.2ms)
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:24:28.055712', '2017-11-08 20:24:28.055712', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:24:28.055712', '2017-11-08 20:24:28.055712', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:24:28.073352', '2017-11-08 20:24:28.073352', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:24:28.073352', '2017-11-08 20:24:28.073352', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:24:28.081467', '2017-11-08 20:24:28.081467', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:24:28.081467', '2017-11-08 20:24:28.081467', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:24:28 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:24:28.224733"], ["updated_at", "2017-11-08 20:24:28.224733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 20:24:28.226845"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", 1], ["updated_at", "2017-11-08 20:24:28.229227"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:24:36.570194', '2017-11-08 20:24:36.570194', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:24:36.570194', '2017-11-08 20:24:36.570194', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:24:36.587770', '2017-11-08 20:24:36.587770', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:24:36.587770', '2017-11-08 20:24:36.587770', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:24:36.596114', '2017-11-08 20:24:36.596114', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:24:36.596114', '2017-11-08 20:24:36.596114', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
RentalsController::create: test_0003_should decrease the movie available_inventory by 1
---------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:24:36 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:24:36.734190"], ["updated_at", "2017-11-08 20:24:36.734190"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 20:24:36.736998"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", 1], ["updated_at", "2017-11-08 20:24:36.739060"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 1.8ms)
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:24:42.722967', '2017-11-08 20:24:42.722967', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:24:42.722967', '2017-11-08 20:24:42.722967', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:24:42.732338', '2017-11-08 20:24:42.732338', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:24:42.732338', '2017-11-08 20:24:42.732338', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:24:42.738758', '2017-11-08 20:24:42.738758', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:24:42.738758', '2017-11-08 20:24:42.738758', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.6ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
MoviesController::index: test_0006_returns an empty array if there are no movies
--------------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RentalsController::update: test_0006_should 
--------------------------------------------
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
RentalsController::update: test_0003_should returns the right information
-------------------------------------------------------------------------
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 20:24:42.858602"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.1ms | ActiveRecord: 1.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 20:24:42.876167"], ["id", 298486374]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 20:24:42.887065"], ["id", 980190962]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should increase the customer's movie_checked_out_count by 1
------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.1ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0005_should decrease the movie's avilable_inventory by 1
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.1ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (2.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
CustomersController::index: test_0006_returns an empty array if there are no customer
-------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-08 12:24:42 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:28:14.357860', '2017-11-08 20:28:14.357860', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:28:14.357860', '2017-11-08 20:28:14.357860', 976610846)[0m
  [1m[36mFixture Delete (7.8ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:28:14.372169', '2017-11-08 20:28:14.372169', 287487352)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:28:14.372169', '2017-11-08 20:28:14.372169', 898238949)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:28:14.391310', '2017-11-08 20:28:14.391310', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:28:14.391310', '2017-11-08 20:28:14.391310', 298486374, 898238949, 848125802)[0m
  [1m[35m (12.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-08 12:28:14 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:28:36.429401', '2017-11-08 20:28:36.429401', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:28:36.429401', '2017-11-08 20:28:36.429401', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:28:36.437932', '2017-11-08 20:28:36.437932', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:28:36.437932', '2017-11-08 20:28:36.437932', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:28:36.443288', '2017-11-08 20:28:36.443288', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:28:36.443288', '2017-11-08 20:28:36.443288', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Movie::validations: test_0001_should be valid
---------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Movie::validations: test_0002_should not be valid without a title
-----------------------------------------------------------------
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::create: test_0001_should create a movie
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"title"=>"movie title", "release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "movies" ("title", "inventory", "created_at", "updated_at", "available_inventory") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "movie title"], ["inventory", 10], ["created_at", "2017-11-08 20:28:36.488791"], ["updated_at", "2017-11-08 20:28:36.488791"], ["available_inventory", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
MoviesController::create: test_0002_should not change the database if the title is missing
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
Started POST "/movies" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#create as HTML
  Parameters: {"movie"=>{"release_data"=>"1979", "inventory"=>"10"}}
Unpermitted parameter: :release_data
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (7.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 9ms (Views: 0.3ms | ActiveRecord: 7.6ms)
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MoviesController::index: test_0002_should return json
-----------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
MoviesController::index: test_0005_should return movies with exactly the required data
--------------------------------------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
MoviesController::index: test_0003_should return an Array
---------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
MoviesController::index: test_0004_should return all movies
-----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::index: test_0001_is a real working route
----------------------------------------------------------
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
MoviesController::index: test_0006_returns an empty array if there are no movies
--------------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "movies" WHERE "movies"."id" = $1[0m  [["id", 898238949]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/movies" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#index as HTML
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
CustomersController::index: test_0006_returns an empty array if there are no customer
-------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CustomersController::index: test_0002_should return json
--------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CustomersController::index: test_0003_should return an Array
------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
CustomersController::index: test_0001_is a real working route
-------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 7ms (Views: 3.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
CustomersController::index: test_0004_should return all customers
-----------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------------
CustomersController::index: test_0005_should return customers with exactly the required data
--------------------------------------------------------------------------------------------
Started GET "/customers" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by CustomersController#index as HTML
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RentalsController::update: test_0006_should 
--------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0005_should decrease the movie's avilable_inventory by 1
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
RentalsController::update: test_0001_should respond with success when given valid data
--------------------------------------------------------------------------------------
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by RentalsController#update as HTML
  Parameters: {"rental"=>{"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}}
Unpermitted parameter: :rental
  [1m[36mRental Load (0.8ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" ORDER BY "rentals"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[36mMovie Load (0.6ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 20:28:36.636462"], ["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.1ms | ActiveRecord: 2.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
RentalsController::update: test_0003_should returns the right information
-------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.4ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 20:28:36.645159"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
RentalsController::update: test_0002_should change due_date to nil when given valid data
----------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 20:28:36.653516"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mRental Load (0.1ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should increase the customer's movie_checked_out_count by 1
------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.1ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------
Customer: test_0001_must be valid
---------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
MoviesController::show: test_0001_can get a specific movie
----------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (1.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
MoviesController::show: test_0003_returns the right information
---------------------------------------------------------------
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Started GET "/movies/898238949" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238949"}
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238949], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
MoviesController::show: test_0002_responds correctly when movie is not found
----------------------------------------------------------------------------
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/movies/898238950" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by MoviesController#show as HTML
  Parameters: {"id"=>"898238950"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 898238950], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
RentalsController::create: test_0005_should not change the database if given invalid data
-----------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by RentalsController#create as HTML
  Parameters: {"rental"=>{"due_date"=>"2016-02-12"}}
Unpermitted parameter: :rental
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 3ms (Views: 0.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
RentalsController::create: test_0001_should create a new rental when given valid data
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:28:36.698648"], ["updated_at", "2017-11-08 20:28:36.698648"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 20:28:36.704347"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", 1], ["updated_at", "2017-11-08 20:28:36.706382"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rentals"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
RentalsController::create: test_0002_should increase the customer movies_checked_out_count by 1
-----------------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:28:36.719350"], ["updated_at", "2017-11-08 20:28:36.719350"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 20:28:36.722171"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", 1], ["updated_at", "2017-11-08 20:28:36.725176"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 2.4ms)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
RentalsController::create: test_0003_should decrease the movie available_inventory by 1
---------------------------------------------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" ORDER BY "movies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
Started POST "/rentals/check-out" for 127.0.0.1 at 2017-11-08 12:28:36 -0800
Processing by RentalsController#create as HTML
  Parameters: {"due_date"=>"2016-02-12", "customer_id"=>"848125802", "movie_id"=>"287487352"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 848125802], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "customer_id", "movie_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["due_date", "2016-02-12"], ["customer_id", 848125802], ["movie_id", 287487352], ["created_at", "2017-11-08 20:28:36.739293"], ["updated_at", "2017-11-08 20:28:36.739293"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 7], ["updated_at", "2017-11-08 20:28:36.740697"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", 1], ["updated_at", "2017-11-08 20:28:36.742441"], ["id", 848125802]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.4ms)
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::create: test_0004_should return bad_request if not enough available_inventory
------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (5.6ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:33:32.182163', '2017-11-08 20:33:32.182163', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:33:32.182163', '2017-11-08 20:33:32.182163', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:33:32.197058', '2017-11-08 20:33:32.197058', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:33:32.197058', '2017-11-08 20:33:32.197058', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:33:32.210102', '2017-11-08 20:33:32.210102', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:33:32.210102', '2017-11-08 20:33:32.210102', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------
Movie::decrease_inventory: test_0001_should return an Integer if there is available inventory
---------------------------------------------------------------------------------------------
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 20:34:15.662893', '2017-11-08 20:34:15.662893', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 20:34:15.662893', '2017-11-08 20:34:15.662893', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 20:34:15.671271', '2017-11-08 20:34:15.671271', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 20:34:15.671271', '2017-11-08 20:34:15.671271', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 20:34:15.678734', '2017-11-08 20:34:15.678734', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 20:34:15.678734', '2017-11-08 20:34:15.678734', 298486374, 898238949, 848125802)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
Movie::decrease_inventory: test_0002_should return nil if there is not available inventory
------------------------------------------------------------------------------------------
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 21:52:07.676172', '2017-11-08 21:52:07.676172', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 21:52:07.676172', '2017-11-08 21:52:07.676172', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 21:52:07.705796', '2017-11-08 21:52:07.705796', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 21:52:07.705796', '2017-11-08 21:52:07.705796', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 21:52:07.713362', '2017-11-08 21:52:07.713362', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 21:52:07.713362', '2017-11-08 21:52:07.713362', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should increase the customer's movie_checked_out_count by 1
------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 21:52:23.449352', '2017-11-08 21:52:23.449352', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 21:52:23.449352', '2017-11-08 21:52:23.449352', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 21:52:23.466171', '2017-11-08 21:52:23.466171', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 21:52:23.466171', '2017-11-08 21:52:23.466171', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 21:52:23.475865', '2017-11-08 21:52:23.475865', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 21:52:23.475865', '2017-11-08 21:52:23.475865', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should increase the customer's movie_checked_out_count by 1
------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 13:52:23 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.7ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 21:52:23.649134"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 9], ["updated_at", "2017-11-08 21:52:23.652038"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 21:52:23.653974"], ["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 2.6ms)
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 21:52:34.944952', '2017-11-08 21:52:34.944952', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 21:52:34.944952', '2017-11-08 21:52:34.944952', 976610846)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 21:52:34.961420', '2017-11-08 21:52:34.961420', 287487352)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 21:52:34.961420', '2017-11-08 21:52:34.961420', 898238949)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 21:52:34.971996', '2017-11-08 21:52:34.971996', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 21:52:34.971996', '2017-11-08 21:52:34.971996', 298486374, 898238949, 848125802)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should increase the customer's movie_checked_out_count by 1
------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 13:52:35 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.6ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 21:52:35.106803"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 9], ["updated_at", "2017-11-08 21:52:35.109636"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 21:52:35.112121"], ["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 2.9ms)
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 21:54:41.557638', '2017-11-08 21:54:41.557638', 848125802)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 21:54:41.557638', '2017-11-08 21:54:41.557638', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 21:54:41.566276', '2017-11-08 21:54:41.566276', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 21:54:41.566276', '2017-11-08 21:54:41.566276', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 21:54:41.572065', '2017-11-08 21:54:41.572065', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 21:54:41.572065', '2017-11-08 21:54:41.572065', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should decrease the customer's movie_checked_out_count by 1
------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 21:55:57.031836', '2017-11-08 21:55:57.031836', 848125802)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 21:55:57.031836', '2017-11-08 21:55:57.031836', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 21:55:57.054774', '2017-11-08 21:55:57.054774', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 21:55:57.054774', '2017-11-08 21:55:57.054774', 898238949)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 21:55:57.065206', '2017-11-08 21:55:57.065206', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 21:55:57.065206', '2017-11-08 21:55:57.065206', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should decrease the customer's movie_checked_out_count by 1
------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 13:55:57 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.6ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 21:55:57.248498"], ["id", 980190962]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 9], ["updated_at", "2017-11-08 21:55:57.251433"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 21:55:57.253704"], ["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 2.7ms)
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (5.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 21:57:23.386648', '2017-11-08 21:57:23.386648', 848125802)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 21:57:23.386648', '2017-11-08 21:57:23.386648', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 21:57:23.410336', '2017-11-08 21:57:23.410336', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 21:57:23.410336', '2017-11-08 21:57:23.410336', 898238949)[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 21:57:23.418441', '2017-11-08 21:57:23.418441', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 21:57:23.418441', '2017-11-08 21:57:23.418441', 298486374, 898238949, 848125802)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should decrease the customer's movie_checked_out_count by 1
------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 13:57:23 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.8ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 21:57:23.578176"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 9], ["updated_at", "2017-11-08 21:57:23.580594"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 21:57:23.582584"], ["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 2.5ms)
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "movies" DISABLE TRIGGER ALL;ALTER TABLE "rentals" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('eva', 'eee', '23 Eva', 'Seattle', 'WA', '12345', '6173482743', 0, '2017-11-08 21:58:24.503332', '2017-11-08 21:58:24.503332', 848125802)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "registered_at", "address", "city", "state", "postal_code", "phone", "movies_checked_out_count", "created_at", "updated_at", "id") VALUES ('anders', 'aaa', '14 anders', 'Seattle', 'WA', '12593', '7189274828', 0, '2017-11-08 21:58:24.503332', '2017-11-08 21:58:24.503332', 976610846)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "movies"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Psych', 'When larcenous real estate clerk Marion Crane goes on the lam with a wad of cash and hopes of starting a new life, she ends up at the notorious Bates Motel, where manager Norman Bates cares for his housebound mother. The place seems quirky, but fineâ€¦ until Marion decides to take a shower', '1960-06-16', 8, 8, '2017-11-08 21:58:24.525422', '2017-11-08 21:58:24.525422', 287487352)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("title", "overview", "release_date", "inventory", "available_inventory", "created_at", "updated_at", "id") VALUES ('Jaws', 'SHARKS', '1975-06-19', 6, 6, '2017-11-08 21:58:24.525422', '2017-11-08 21:58:24.525422', 898238949)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rentals"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-12-12', '2017-11-08 21:58:24.531577', '2017-11-08 21:58:24.531577', 980190962, 287487352, 976610846)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rentals" ("due_date", "created_at", "updated_at", "id", "movie_id", "customer_id") VALUES ('2017-05-20', '2017-11-08 21:58:24.531577', '2017-11-08 21:58:24.531577', 298486374, 898238949, 848125802)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "movies" ENABLE TRIGGER ALL;ALTER TABLE "rentals" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------
RentalsController::update: test_0004_should decrease the customer's movies_checked_out_count by 1
-------------------------------------------------------------------------------------------------
  [1m[36mRental Load (0.2ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
Started PATCH "/rentals/check-in" for 127.0.0.1 at 2017-11-08 13:58:24 -0800
Processing by RentalsController#update as HTML
  Parameters: {"customer_id"=>"976610846", "movie_id"=>"287487352", "due_date"=>"2017-12-12"}
  [1m[36mRental Load (0.5ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."customer_id" = $1 AND "rentals"."movie_id" = $2 AND "rentals"."due_date" = $3 ORDER BY "rentals"."id" ASC LIMIT $4[0m  [["customer_id", 976610846], ["movie_id", 287487352], ["due_date", "2017-12-12"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT  "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 287487352], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "rentals" SET "due_date" = $1, "updated_at" = $2 WHERE "rentals"."id" = $3[0m  [["due_date", nil], ["updated_at", "2017-11-08 21:58:24.669984"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "movies" SET "available_inventory" = $1, "updated_at" = $2 WHERE "movies"."id" = $3[0m  [["available_inventory", 9], ["updated_at", "2017-11-08 21:58:24.672458"], ["id", 287487352]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "customers" SET "movies_checked_out_count" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["movies_checked_out_count", -1], ["updated_at", "2017-11-08 21:58:24.674487"], ["id", 976610846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 2.3ms)
  [1m[36mRental Load (0.3ms)[0m  [1m[34mSELECT  "rentals".* FROM "rentals" WHERE "rentals"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 976610846], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
